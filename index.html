<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href='https://fonts.googleapis.com/css?family=Architects+Daughter' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <title>Semantic-hostnames by semantic-hostnames</title>
  </head>

  <body>
    <header>
      <div class="inner">
        <h1>Semantic-hostnames</h1>
        <h2>Proposal and documentation for semantic hostnames</h2>
        <a href="https://github.com/semantic-hostnames/semantic-hostnames" class="button"><small>View project on</small> GitHub</a>
      </div>
    </header>

    <div id="content-wrapper">
      <div class="inner clearfix">
        <section id="main-content">
          <h1>
<a id="convention-for-semantic-hostnames-csh" class="anchor" href="#convention-for-semantic-hostnames-csh" aria-hidden="true"><span class="octicon octicon-link"></span></a>Convention for Semantic Hostnames (CSH)</h1>

<h2>
<a id="overview" class="anchor" href="#overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>Overview</h2>

<p>The rules for creating hostnames are covered in <a href="https://www.ietf.org/rfc/rfc952.txt" title="IETF RFC 952">RFC 952</a>, <a href="https://www.ietf.org/rfc/rfc1123.txt" title="IETF RFC 1123">RFC 1123</a>, and further amended in <a href="https://www.ietf.org/rfc/rfc2181.txt" title="IETF RFC 2181">RFC 2181</a>.</p>

<p>From the <a href="https://en.wikipedia.org/wiki/Hostname" title="Article regarding hostnames on Wikipedia">Wikipedia</a> article:</p>

<blockquote>
<p>Hostnames are human-readable nicknames that correspond to the address of a device connected to a network. They are used by various naming systems, e.g., Network Information Service (NIS), Domain Name System (DNS), Server Message Block (SMB), and the meaning of hostname will vary according to the naming system used. A hostname meaningful to a Microsoft NetBIOS workgroup may be an invalid Internet hostname. When presented with a hostname without any context, it is usually safe to assume that the network is the Internet and the hostname's naming system is the DNS.</p>
</blockquote>

<p>However, the latest one of these (RFC 2181) was written in 1997, and the Internet has moved on.</p>

<h2>
<a id="the-problem-of-treating-hostnames-as-domain-names" class="anchor" href="#the-problem-of-treating-hostnames-as-domain-names" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Problem of Treating Hostnames as Domain Names</h2>

<p>When the hostname spec was first created, it assumed that one server on the Internet did something. There was one server named <a href="http://www.yourcompany.com">www.yourcompany.com</a>, and it alone handled your HTTP traffic. It sat in your comms room, because you hosted your own server, and it had one IP address.</p>

<p>In the modern world of <a href="https://blog.codeship.com/immutable-infrastructure/" title="Blog post by Codeship on the concept of Immutable Infrastructure">immutable infrastructure</a>, and treating servers as <a href="http://www.lauradhamilton.com/servers-pets-versus-cattle" title='Excellent summary of the "Pets vs Cattle" concept'>cattle rather than pets</a>, this schema is less useful. What is your <code>www</code> server? Your load balancer? Your WAF? Your <a href="https://www.cloudflare.com/" title="CloudFlare home page">CloudFlare</a> account?</p>

<p>There is also the question of <em>domain</em> itself. Are Cloud servers on <a href="https://aws.amazon.com/" title="Amazon AWS homepage">Amazon AWS</a> your domain? Or <a href="https://www.digitalocean.com" title="Digital Ocean homepage">Digital Ocean</a>? How many domains resolve to those servers? Do the names of those servers mean anything to you?</p>

<h2>
<a id="making-hostnames-have-modern-meaning" class="anchor" href="#making-hostnames-have-modern-meaning" aria-hidden="true"><span class="octicon octicon-link"></span></a>Making Hostnames Have Modern Meaning</h2>

<p>The concept of semantic hostnames is inspired by a <a href="https://blog.serverdensity.com/picking-server-hostnames/" title="Server Density blog on hostnames">blog post</a> by <a href="https://www.serverdensity.com/" title="Server Density home page">Server Density</a>, although the naming convention in the article again follows the concept of <em>domain</em>. Domain names can, and should, be decoupled from hostnames. Domains may change, but your hostname should be for the life of the device.</p>

<p>The aim is to have a naming convention that is:</p>

<ul>
<li>Easily searched. Whether just throwing names in a spreadsheet, grepping logs or files, or full blown Elastisearch, having a convention that exposes key information about the host from the name alone is useful.</li>
<li>Still useful at the terminal. As most terminals will chop to the first period, it's useful to have meaningful data at the command line.</li>
</ul>

<h3>
<a id="pragmatism-at-the-terminal" class="anchor" href="#pragmatism-at-the-terminal" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pragmatism at the Terminal</h3>

<p>Let's take a couple of "classic" hostnames for a server: firstly, a digital agency running <code>uat.some-client.myagency.com</code>, and an in-house team creating a live microservice hosted on <code>users.mycoolstartup.com</code>. What do these look like at the terminal when you're trying to fix them?</p>

<p>The digital agency name (assuming using <a href="http://ohmyz.sh/" title="Oh my ZSH home page">oh-my-zsh</a> with "bira" theme):</p>

<div class="highlight highlight-source-shell"><pre>╭─root@uat  <span class="pl-k">~</span>/semantic-hostnames
╰─$</pre></div>

<p>The cool startup microservice:</p>

<div class="highlight highlight-source-shell"><pre>╭─root@users  <span class="pl-k">~</span>/semantic-hostnames
╰─$</pre></div>

<p>While the above tell me <em>something</em> about the environment I'm logged into, I would prefer to know more.</p>

<h3>
<a id="an-example-semantic-hostname" class="anchor" href="#an-example-semantic-hostname" aria-hidden="true"><span class="octicon octicon-link"></span></a>An example semantic hostname</h3>

<p><code>acme-pipe-uat-nginx01.cen6-rs-vm-lon-uk</code></p>

<p>Breaking this down into components:</p>

<p><code>[group]-[tier]-[environment]-[role][increment].[os]-[hosting provider]-[device type]-[locale]-[region]</code></p>

<p>What can we tell about the above server just from the name?</p>

<p>Well, assuming the context of, say, a digital agency, this server is for our <code>Acme</code> client. If we only do in-house projects, it's our <code>Acme</code> project or microservice. It's a non-production pipeline server based on the <code>pipe</code> flag, and is used for <code>UAT</code>. It's primary role is as a Web server using <code>nginx</code>, and it's the first server. It also is running CentOS 6 as based on the <code>cen6</code> part, hosted by <a href="http://www.rackspace.com/" title="Rackspace home page">Rackspace</a>. It's virtual, i.e. not bare metal, based on <code>vm</code>, and it is located in their London data centre in the United Kingdom.</p>

<p>At the terminal, we'll see:</p>

<div class="highlight highlight-source-shell"><pre>╭─root@acme-pipe-uat-nginx01  <span class="pl-k">~</span>/semantic-hostnames
╰─$</pre></div>

<p>Now I know I'm not going to accidentally restart the live production nginx instance, or working on the wrong project.</p>

<h2>
<a id="creating-a-semantic-hostname" class="anchor" href="#creating-a-semantic-hostname" aria-hidden="true"><span class="octicon octicon-link"></span></a>Creating a semantic hostname</h2>

<p>A <em>semantic hostname</em> is broken down into two or more labels, separated by periods.</p>

<ul>
<li>Business value</li>
<li>Infrastructure</li>
<li>Optional: Image data (AMI info, etc)</li>
</ul>

<p>The third label, <em>Image Data</em>, is not covered here as it is very specific to individual implementations.</p>

<p>The RFC states the entire name must be no more than 253 octets, and each period-separated label should be no more than 63 octets. Underscores are not allowed. Each part of the label is hyphenated to split into meaningful slugs.</p>

<h3>
<a id="first-label-business-value" class="anchor" href="#first-label-business-value" aria-hidden="true"><span class="octicon octicon-link"></span></a>First label: Business Value</h3>

<h5>
<a id="group" class="anchor" href="#group" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>group</code>
</h5>

<p><strong>Required</strong>. This may be a project, a company name, a client, or a domain, though I recommend against the latter. </p>

<h5>
<a id="tier" class="anchor" href="#tier" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>tier</code>
</h5>

<p><em>Optional</em>. This allows you to have a sweeping boolean between production and your pipeline. You may have many different non-production environments: UAT, QA, OAT, beta, demo and so forth. Rather than create searches on all of these, a flag of <code>pipeline</code> or <code>pipe</code> can help. If you prefer to skip this, you can use inverse searching with <code>env != 'prod'</code> </p>

<h5>
<a id="environment" class="anchor" href="#environment" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>environment</code>
</h5>

<p><strong>Required</strong>. The environment itself, for example <code>prod</code> for production, <code>qa</code>, <code>uat</code> and so forth.</p>

<h5>
<a id="role" class="anchor" href="#role" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>role</code>
</h5>

<p><strong>Required</strong>. The <em>role</em> of the server in your architecture. If you have multiple roles for the server (i.e. a server with Apache and MySQL running on it), then choose one as primary or use a generic role, i.e. <code>web</code>.</p>

<h5>
<a id="increment" class="anchor" href="#increment" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>increment</code>
</h5>

<p><strong>Required</strong> The increment of the above role. Default is <code>01</code>, but if you are into the thousands of servers, feel free to start with higher bounds such as <code>00001</code> (although you probably already have your own naming convention by that scale).</p>

<h3>
<a id="second-label-infrastructure" class="anchor" href="#second-label-infrastructure" aria-hidden="true"><span class="octicon octicon-link"></span></a>Second label: Infrastructure</h3>

<h5>
<a id="os" class="anchor" href="#os" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>os</code>
</h5>

<p><strong>Required</strong>. The operating system of the device. You should use the major version release number as the last part of this, i.e. <code>rhel6</code> for Red Hat 6, <code>win10</code> for Windows, <code>osx10</code> for a Macbook, etc.</p>

<h5>
<a id="hosting-provider" class="anchor" href="#hosting-provider" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>hosting provider</code>
</h5>

<p><strong>Required</strong>. If you host your own servers, this should be the team name, i.e. <code>ops</code>. You need to know who to ring if there's a problem.</p>

<h5>
<a id="device-type" class="anchor" href="#device-type" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>device type</code>
</h5>

<p><em>Optional</em>, but recommended. Short code for the device: <code>sp</code> for smartphone, <code>vm</code> or <code>vrt</code> for virtual machine, <code>lb</code> for load balancer, and so on.</p>

<h5>
<a id="locale" class="anchor" href="#locale" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>locale</code>
</h5>

<p><em>Optional</em>.  A region-specific slug, i.e. <code>lon</code> for London, UK.</p>

<h5>
<a id="region" class="anchor" href="#region" aria-hidden="true"><span class="octicon octicon-link"></span></a><code>region</code>
</h5>

<p><strong>Required</strong>. The region the device is in. If it's a mobile device, the country of issue.</p>

<h2>
<a id="semantic-hostnames-and-fqdns" class="anchor" href="#semantic-hostnames-and-fqdns" aria-hidden="true"><span class="octicon octicon-link"></span></a>Semantic hostnames and FQDNs</h2>

<p>Semantic hostnames and <a href="https://en.wikipedia.org/wiki/Fully_qualified_domain_name" title="FQDN description on Wikipedia">Fully Qualified Domain Names (FQDNs)</a> don't have to be mutually exclusive. As previously mentioned, decoupling hostnames from domains is advantageous, but if you wish to make your hostname both <em>semantic</em> and <em>fully qualified</em>, then they can both co-exist:</p>

<p><code>acme-pipe-uat-nginx01.cen6-rs-vm-lon-uk.somedomain.com</code></p>

<h2>
<a id="specification-by-example" class="anchor" href="#specification-by-example" aria-hidden="true"><span class="octicon octicon-link"></span></a>Specification by example</h2>

<p>A host running as part of a DB cluster, (second machine of 5) in UAT for the Wibble project. The server is running Red Hat 6 and is hosted by AWS in their US East 1 region.</p>

<p><code>wibble-pipe-uat-dbcluster02.rhel6-aws-vm-us-east-1</code></p>

<p>The same machine, but the team does not wish to use the <code>tier</code> slug:</p>

<p><code>wibble-uat-dbcluster02.rhel6-aws-vm-us-east-1</code></p>

<p>A single live host running a microservice for Single Sign On for Cool Startup. The machine is running Ubuntu 14x on Digital Ocean in their London environment:</p>

<p><code>cs-prod-sso01.ub14-do-vm-lon-uk</code></p>

<h2>
<a id="the-main-thing-to-remember" class="anchor" href="#the-main-thing-to-remember" aria-hidden="true"><span class="octicon octicon-link"></span></a>The main thing to remember</h2>

<p>Be consistent. The convention above may not be ideal for you, but if you choose to change order of label parts, make sure you do it throughout. Don't have some servers following one naming convention and another following another unless you can guarantee you will never need to look through any sort of list or search containing <em>both</em>.</p>

<h2>
<a id="the-author" class="anchor" href="#the-author" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Author</h2>

<p>The Convention for Semantic Hostnames was created by <a href="https://github.com/shrikeh" title="My GitHub profile">shrikeh</a> after working for years trying to normalise naming of a herd of different servers with different operating systems for different clients, projects, and roles. Tell me what you think of it on <a href="https://twitter.com/barney_hanlon" title="My Twitter page">Twitter</a>.</p>
        </section>

        <aside id="sidebar">
          <a href="https://github.com/semantic-hostnames/semantic-hostnames/zipball/master" class="button">
            <small>Download</small>
            .zip file
          </a>
          <a href="https://github.com/semantic-hostnames/semantic-hostnames/tarball/master" class="button">
            <small>Download</small>
            .tar.gz file
          </a>

          <p class="repo-owner"><a href="https://github.com/semantic-hostnames/semantic-hostnames"></a> is maintained by <a href="https://github.com/semantic-hostnames">semantic-hostnames</a>.</p>

          <p>This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the Architect theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.</p>
        </aside>
      </div>
    </div>

            <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-39890160-3");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
